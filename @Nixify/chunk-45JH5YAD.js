var u=r=>r==null,m=r=>encodeURIComponent(r).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`);function l(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function a(r,n){return n.encode?n.strict?m(r):encodeURIComponent(r):r}function g(r){switch(r.arrayFormat){case"index":return n=>(t,e)=>{let i=t.length;return e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?t:e===null?[...t,[a(n,r),"[",i,"]"].join("")]:[...t,[a(n,r),"[",a(i,r),"]=",a(e,r)].join("")]};case"bracket":return n=>(t,e)=>e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?t:e===null?[...t,[a(n,r),"[]"].join("")]:[...t,[a(n,r),"[]=",a(e,r)].join("")];case"colon-list-separator":return n=>(t,e)=>e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?t:e===null?[...t,[a(n,r),":list="].join("")]:[...t,[a(n,r),":list=",a(e,r)].join("")];case"comma":case"separator":case"bracket-separator":{let n=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(e,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?e:(i=i===null?"":i,e.length===0?[[a(t,r),n,a(i,r)].join("")]:[[e,a(i,r)].join(r.arrayFormatSeparator)])}default:return n=>(t,e)=>e===void 0||r.skipNull&&e===null||r.skipEmptyString&&e===""?t:e===null?[...t,a(n,r)]:[...t,[a(n,r),"=",a(e,r)].join("")]}}var y=(r,n)=>{if(!r)return "";n={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...n},l(n.arrayFormatSeparator);let t=c=>n.skipNull&&u(r[c])||n.skipEmptyString&&r[c]==="",e=g(n),i={};for(let[c,f]of Object.entries(r))t(c)||(i[c]=f);let d=Object.keys(i);return n.sort!==!1&&d.sort(n.sort),d.map(c=>{let f=r[c];return f===void 0?"":f===null?a(c,n):Array.isArray(f)?f.length===0&&n.arrayFormat==="bracket-separator"?a(c,n)+"[]":f.reduce(e(c),[]).join("&"):a(c,n)+"="+a(f,n)}).filter(c=>c.length>0).join("&")},S={stringify:y};

export { a, S as b };
