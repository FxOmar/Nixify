var E=Object.defineProperty,k=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var R=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e)=>{for(var t in e||(e={}))M.call(e,t)&&R(r,t,e[t]);if(O)for(var t of O(e))N.call(e,t)&&R(r,t,e[t]);return r},l=(r,e)=>k(r,H(e));var f=(r,e,t)=>(R(r,typeof e!="symbol"?e+"":e,t),t);var b=(r,e,t)=>new Promise((s,n)=>{var u=o=>{try{c(t.next(o))}catch(d){n(d)}},a=o=>{try{c(t.throw(o))}catch(d){n(d)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(u,a);c((t=t.apply(r,e)).next())});var y=class extends Error{constructor(t,s,n){let u=t.status||t.status===0?t.status:"",a=t.statusText||"",c=`${u} ${a}`.trim(),o=c?`status code ${c}`:"an unknown error";super(`Request failed with ${o}`);f(this,"response");f(this,"request");f(this,"options");this.name="HTTPError",this.response=t,this.request=s,this.options=n}};function j(r,e,t){if(!r.ok)throw new y(r,e,t);return r}var F=r=>r==null,U=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`);function A(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function i(r,e){return e.encode?e.strict?U(r):encodeURIComponent(r):r}function I(r){switch(r.arrayFormat){case"index":return e=>(t,s)=>{let n=t.length;return s===void 0||r.skipNull&&s===null||r.skipEmptyString&&s===""?t:s===null?[...t,[i(e,r),"[",n,"]"].join("")]:[...t,[i(e,r),"[",i(n,r),"]=",i(s,r)].join("")]};case"bracket":return e=>(t,s)=>s===void 0||r.skipNull&&s===null||r.skipEmptyString&&s===""?t:s===null?[...t,[i(e,r),"[]"].join("")]:[...t,[i(e,r),"[]=",i(s,r)].join("")];case"colon-list-separator":return e=>(t,s)=>s===void 0||r.skipNull&&s===null||r.skipEmptyString&&s===""?t:s===null?[...t,[i(e,r),":list="].join("")]:[...t,[i(e,r),":list=",i(s,r)].join("")];case"comma":case"separator":case"bracket-separator":{let e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(s,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?s:(n=n===null?"":n,s.length===0?[[i(t,r),e,i(n,r)].join("")]:[[s,i(n,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,s)=>s===void 0||r.skipNull&&s===null||r.skipEmptyString&&s===""?t:s===null?[...t,i(e,r)]:[...t,[i(e,r),"=",i(s,r)].join("")]}}var $=(r,e)=>{if(!r)return"";e=p({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),A(e.arrayFormatSeparator);let t=a=>e.skipNull&&F(r[a])||e.skipEmptyString&&r[a]==="",s=I(e),n={};for(let[a,c]of Object.entries(r))t(a)||(n[a]=c);let u=Object.keys(n);return e.sort!==!1&&u.sort(e.sort),u.map(a=>{let c=r[a];return c===void 0?"":c===null?i(a,e):Array.isArray(c)?c.length===0&&e.arrayFormat==="bracket-separator"?i(a,e)+"[]":c.reduce(s(a),[]).join("&"):i(a,e)+"="+i(c,e)}).filter(a=>a.length>0).join("&")},q={stringify:$};function S(r){return r==null||Object.keys(r).length===0}function T(r,e){return S(r)?!1:Object.hasOwnProperty.call(r,e)}function w(r,e){let t=new Headers(r);if(e instanceof Headers)e.forEach((s,n)=>{t.append(n,s)});else if(typeof e=="object")for(let[s,n]of Object.entries(e))t.append(s,n);return t}var h=(r,e)=>{Object.assign(r,p({},e))};var m={},P=(r,e,t)=>{var u;let s=new URL(e.path,(u=r==null?void 0:r.url)!=null?u:void 0);if(s.protocol!=="https:"&&s.protocol!=="http:")throw new TypeError(`Unsupported protocol, ${s.protocol}`);if(e.signal&&!(e.signal instanceof AbortSignal))throw new TypeError(typeof e.signal+" received for signal, but expected an AbortSignal");T(e,"qs")&&(s.search=q.stringify(e.qs,r==null?void 0:r.qs));let n=new Headers(p(p({},m),r==null?void 0:r.headers));return T(e,"json")&&(e.body=JSON.stringify(e.json),n.append("Content-Type","application/json; charset=UTF-8"),delete e.json),(e==null?void 0:e.body)instanceof URLSearchParams&&n.append("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),e.headers&&(n=w(n,e.headers)),new Request(s.toString(),{method:t.toLocaleUpperCase(),headers:n,body:e.body,signal:e.signal,cache:e.cache,credentials:e.credentials,integrity:e.integrity,keepalive:e.keepalive,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy})},g=(r,e,t)=>b(void 0,null,function*(){let s=P(r,t,e);return fetch(s).then(n=>j(n,s,r)).then(n=>b(void 0,null,function*(){let a={headers:(()=>{let c={};for(let o of n.headers.entries())c[o[0]]=o[1];return c})(),status:n.status,statusText:n.statusText,config:s};if(t.responseType)try{a.data=yield n[t.responseType]()}catch(c){throw new Error(`Unsupported response type "${t.responseType}" specified in the request. The Content-Type of the response is "${n.headers.get("Content-Type")}".`)}else a.data=yield n.json();return a}))}),L=r=>{let e=["get","head","put","delete","post","patch","options"],t={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},s={};return e.forEach(n=>{s[n]=(u,a)=>{let c="json",o=l(p({},Object.assign({},...Object.entries(t).map(([d,x])=>({[d]:()=>(h(m,{accept:x}),c=d,o)})))),{then(d){g(r,n,p({path:u,responseType:c},a)).then(d)}});return o}}),s},z=r=>{let e=Object.fromEntries(Object.entries(r||{default:{}}).map(([s,n])=>[s,l(p({},L(n)),{setHeaders:u=>h(n.headers=n.headers||{},u)})]));return S(r)?p({},e.default):l(p(p({},e),e[Object.keys(e)[0]]),{setHeaders:s=>h(m,s)})},Y={create:z};export{Y as default};
