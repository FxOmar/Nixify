var T=Object.defineProperty,w=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,n=(s,e)=>{for(var t in e||(e={}))x.call(e,t)&&b(s,t,e[t]);if(y)for(var t of y(e))I.call(e,t)&&b(s,t,e[t]);return s},O=(s,e)=>w(s,E(e));var h=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t);var q=class extends Error{constructor(t,a,o){let r=t.status||t.status===0?t.status:"",u=t.statusText||"",c=`${r} ${u}`.trim(),p=c?`status code ${c}`:"an unknown error";super(`Request failed with ${p}`);h(this,"response");h(this,"request");h(this,"options");this.name="HTTPError",this.response=t,this.request=a,this.options=o}};function d(s,e,t){if(!s.ok)throw new q(s,e,t);return s}function U(s){return s==null||Object.keys(s).length===0}function l(s,e){return U(s)?!1:Object.hasOwnProperty.call(s,e)}var P=(s,e)=>{let t=new URL(e.path,!l(s,"PREFIX_URL")||s.PREFIX_URL===null?void 0:typeof s.PREFIX_URL=="object"&&e.PREFIX_URL?s.PREFIX_URL[e.PREFIX_URL]:Object.values(s.PREFIX_URL)[0]);l(e,"qs")&&(t.search=new URLSearchParams(e.qs).toString());let a=new Headers(n(n({},s==null?void 0:s.headers),e==null?void 0:e.headers));return["post","put","patch"].includes(e.method)&&l(e,"json")&&!l(e,"headers['Content-Type']")&&a.append("Content-Type","application/json; charset=UTF-8"),new Request(t.toString(),{method:e.method.toLocaleUpperCase(),credentials:"same-origin",headers:a,body:Object.hasOwnProperty.call(e,"json")?JSON.stringify(e.json):e.body,signal:e.signal})},_=async(s,e)=>{var a,o;let t=P(s,e);return(a=s==null?void 0:s.hooks)!=null&&a.beforeRequest&&await s.hooks.beforeRequest(t),(o=e==null?void 0:e.hooks)!=null&&o.beforeRequest&&await e.hooks.beforeRequest(t),fetch(t).then(r=>d(r,t,s)).then(async r=>{let u=()=>{let p={};for(let R of r.headers.entries())p[R[0]]=R[1];return p};return{data:await r[e.responseType](),headers:u(),status:r.status,statusText:r.statusText,config:t}})},j={create(s){let e=["get","head","put","delete","post","patch","options"],t=["json","text","blob","arrayBuffer","formData"],a={},o={setHeaders:r=>{a=n(n({},a),r)}};return e.forEach(r=>{o[r]=(u,c)=>{let p="json",R=O(n({},Object.assign({},...t.map(i=>({[i]:()=>(p=i,R)})))),{then(i){_(s,n({path:u,method:r,headers:a,responseType:p},c)).then(i)}});return R}}),o}},N=n(n({},j),j.create());export{N as default};
