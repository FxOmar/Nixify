var j=Object.defineProperty,E=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,o=(s,e)=>{for(var t in e||(e={}))I.call(e,t)&&b(s,t,e[t]);if(h)for(var t of h(e))x.call(e,t)&&b(s,t,e[t]);return s},O=(s,e)=>E(s,w(e));var q=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t);var y=class extends Error{constructor(t,r,a){let u=t.status||t.status===0?t.status:"",n=t.statusText||"",c=`${u} ${n}`.trim(),R=c?`status code ${c}`:"an unknown error";super(`Request failed with ${R}`);q(this,"response");q(this,"request");q(this,"options");this.name="HTTPError",this.response=t,this.request=r,this.options=a}};function d(s,e,t){if(!s.ok)throw new y(s,e,t);return s}function P(s){return s==null||Object.keys(s).length===0}function l(s,e){return P(s)?!1:Object.hasOwnProperty.call(s,e)}var U=(s,e,t)=>{let r=new URL(e.path,!l(s,"PREFIX_URL")||s.PREFIX_URL===null?void 0:typeof s.PREFIX_URL=="object"&&e.PREFIX_URL?s.PREFIX_URL[e.PREFIX_URL]:Object.values(s.PREFIX_URL)[0]);l(e,"qs")&&(r.search=new URLSearchParams(e.qs).toString());let a=new Headers(o(o({},s==null?void 0:s.headers),e==null?void 0:e.headers));return["post","put","patch"].includes(t)&&l(e,"json")&&!l(e,"headers['Content-Type']")&&a.append("Content-Type","application/json; charset=UTF-8"),new Request(r.toString(),{method:t.toLocaleUpperCase(),headers:a,body:l(e,"json")?JSON.stringify(e.json):e.body,signal:e.signal,cache:e.cache,credentials:e.credentials,integrity:e.integrity,keepalive:e.keepalive,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy})},_=async(s,e,t)=>{var a,u;let r=U(s,t,e);return(a=s==null?void 0:s.hooks)!=null&&a.beforeRequest&&await s.hooks.beforeRequest(r),(u=t==null?void 0:t.hooks)!=null&&u.beforeRequest&&await t.hooks.beforeRequest(r),fetch(r).then(n=>d(n,r,s)).then(async n=>{let c=()=>{let i={};for(let p of n.headers.entries())i[p[0]]=p[1];return i};return{data:await n[t.responseType](),headers:c(),status:n.status,statusText:n.statusText,config:r}})},T={create(s){let e=["get","head","put","delete","post","patch","options"],t=["json","text","blob","arrayBuffer","formData"],r={},a={setHeaders:u=>{r=o(o({},r),u)}};return e.forEach(u=>{a[u]=(n,c)=>{let R="json",i=O(o({},Object.assign({},...t.map(p=>({[p]:()=>(R=p,i)})))),{then(p){_(s,u,o({path:n,headers:r,responseType:R},c)).then(p)}});return i}}),a}},H=o(o({},T),T.create());export{H as default};
