var i=Object.defineProperty,E=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var d=(s,e,t)=>e in s?i(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,n=(s,e)=>{for(var t in e||(e={}))w.call(e,t)&&d(s,t,e[t]);if(q)for(var t of q(e))x.call(e,t)&&d(s,t,e[t]);return s},O=(s,e)=>E(s,T(e));var l=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}toJSON(){return{error:{name:this.name,message:this.message,stacktrace:this.stack}}}};function y(s){return s.ok?s:new l(s.statusText)}function I(s){return s==null||Object.keys(s).length===0}function c(s,e){return I(s)?!1:Object.hasOwnProperty.call(s,e)}var U=(s,e)=>{let t=new URL(e.path,!c(s,"PREFIX_URL")||s.PREFIX_URL===null?void 0:typeof s.PREFIX_URL=="object"&&e.PREFIX_URL?s.PREFIX_URL[e.PREFIX_URL]:Object.values(s.PREFIX_URL)[0]);c(e,"qs")&&(t.search=new URLSearchParams(e.qs).toString());let r=new Headers(n(n({},s==null?void 0:s.headers),e==null?void 0:e.headers));return["post","put","patch"].includes(e.method)&&c(e,"json")&&!c(e,"headers['Content-Type']")&&r.append("Content-Type","application/json; charset=UTF-8"),new Request(t.toString(),{method:e.method.toLocaleUpperCase(),credentials:"same-origin",headers:r,body:Object.hasOwnProperty.call(e,"json")?JSON.stringify(e.json):e.body,signal:e.signal})},_=async(s,e)=>{var r,o;let t=U(s,e);return(r=s==null?void 0:s.hooks)!=null&&r.beforeRequest&&await s.hooks.beforeRequest(t),(o=e==null?void 0:e.hooks)!=null&&o.beforeRequest&&await e.hooks.beforeRequest(t),fetch(t).then(y).then(async a=>{let h=()=>{let p={};for(let u of a.headers.entries())p[u[0]]=u[1];return p};return{data:await a[e.responseType](),headers:h(),status:a.status,statusText:a.statusText,config:t}})},j={create(s){let e=["get","head","put","delete","post","patch","options"],t=["json","text","blob","arrayBuffer","formData"],r={},o={setHeaders:a=>{r=n(n({},r),a)}};return e.forEach(a=>{o[a]=(h,b)=>{let p="json",u=O(n({},Object.assign({},...t.map(R=>({[R]:()=>(p=R,u)})))),{then(R){_(s,n({path:h,method:a,headers:r,responseType:p},b)).then(R)}});return u}}),o}},X=n(n({},j),j.create());export{X as default};
//# sourceMappingURL=index.mjs.map